<script setup>
import { ref, computed } from 'vue'
import './App.css'
import BookCard from './BookCard.vue'

import duneCover from './assets/covers/dune_cover.png'
import kosinogCover from './assets/covers/kosinog_cover.png'
import solarisCover from './assets/covers/solaris_cover.png'
import earthCover from './assets/covers/earth_cover.png'
import leftHandCover from './assets/covers/left_hand_cover.png'
import picnicCover from './assets/covers/piknik_cover.png'

const books = ref([
  {
    id: 1,
    title: '–î—é–Ω–∞',
    description: '–≠–ø–∏—á–µ—Å–∫–∞—è –Ω–∞—É—á–Ω–æ-—Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∞—è —Å–∞–≥–∞ –§—Ä—ç–Ω–∫–∞ –ì–µ—Ä–±–µ—Ä—Ç–∞ –æ –≤–ª–∞—Å—Ç–∏, —Ä–µ–ª–∏–≥–∏–∏ –∏ —ç–∫–æ–ª–æ–≥–∏–∏ –ø–ª–∞–Ω–µ—Ç—ã –ê—Ä—Ä–∞–∫–∏—Å.',
    genre: '–ù–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞',
    cover: duneCover,
    adult: false,
    rating: 4
  },
  {
    id: 2,
    title: '–ö–æ—Å–∏–Ω–æ–≥. –ò—Å—Ç–æ—Ä–∏—è –æ –∫–æ–ª–¥–æ–≤—Å—Ç–≤–µ',
    description: '–§—ç–Ω—Ç–µ–∑–∏–π–Ω—ã–π —Ä–æ–º–∞–Ω –æ –º–∞–≥–∏–∏, –¥—Ä–µ–≤–Ω–∏—Ö —Å–∏–ª–∞—Ö –∏ —Å—É–¥—å–±–µ —á–µ–ª–æ–≤–µ–∫–∞ –º–µ–∂–¥—É –¥–≤—É–º—è –º–∏—Ä–∞–º–∏.',
    genre: '–§—ç–Ω—Ç–µ–∑–∏',
    cover: kosinogCover,
    adult: true,
    rating: 3
  },
  {
    id: 3,
    title: '–°–æ–ª—è—Ä–∏—Å',
    description: '–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞ –°—Ç–∞–Ω–∏—Å–ª–∞–≤–∞ –õ–µ–º–∞ –æ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–Ω—è—Ç—å —á—É–∂–¥—ã–π —Ä–∞–∑—É–º.',
    genre: '–§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞',
    cover: solarisCover,
    adult: false,
    rating: 4
  },
  {
    id: 4,
    title: '–í–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–æ—à–ª–æ–º –ó–µ–º–ª–∏',
    description: '–¶–∏–∫–ª –õ—é –¶—ã—Å–∏–Ω—è –æ –ø–µ—Ä–≤–æ–º –∫–æ–Ω—Ç–∞–∫—Ç–µ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞ —Å –∏–Ω–æ–ø–ª–∞–Ω–µ—Ç–Ω–æ–π —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏–µ–π.',
    genre: '–¢–≤—ë—Ä–¥–∞—è –Ω–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞',
    cover: earthCover,
    adult: false,
    rating: 5
  },
  {
    id: 5,
    title: '–õ–µ–≤–∞—è —Ä—É–∫–∞ –¢—å–º—ã',
    description: '–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞ –£—Ä—Å—É–ª—ã –õ–µ –ì—É–∏–Ω –æ –ø–ª–∞–Ω–µ—Ç–µ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º –æ–±—â–µ—Å—Ç–≤–∞.',
    genre: '–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞',
    cover: leftHandCover,
    adult: true,
    rating: 3
  },
  {
    id: 6,
    title: '–ü–∏–∫–Ω–∏–∫ –Ω–∞ –æ–±–æ—á–∏–Ω–µ',
    description: '–†–æ–º–∞–Ω –±—Ä–∞—Ç—å–µ–≤ –°—Ç—Ä—É–≥–∞—Ü–∫–∏—Ö –æ –∑–∞–≥–∞–¥–æ—á–Ω–æ–π –ó–æ–Ω–µ –∏ –µ—ë –æ–ø–∞—Å–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞—Ö.',
    genre: '–ù–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞',
    cover: picnicCover,
    adult: true,
    rating: 2
  }
])

const showAdult = ref(false)
const sortHighToLow = ref(true)

// –§–∏–ª—å—Ç—Ä 18+
const filteredBooks = computed(() => {
  return books.value.filter(book => showAdult.value || !book.adult)
})

// –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É
const sortedBooks = computed(() => {
  return [...filteredBooks.value].sort((a, b) =>
      sortHighToLow.value ? b.rating - a.rating : a.rating - b.rating
  )
})
</script>

<template>
  <div class="container">
    <h1>üìö –ú–æ–π —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ—Å–ª–µ–¥–Ω–∏–∏—Ö –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –∫–Ω–∏–≥</h1>

    <div class="controls">
      <label>
        <input type="checkbox" v-model="showAdult" /> –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å 18+
      </label>
      <button @click="sortHighToLow = !sortHighToLow">
        –°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É {{ sortHighToLow ? '‚ñº' : '‚ñ≤' }}
      </button>
    </div>

    <div class="grid">
      <BookCard v-for="book in sortedBooks" :key="book.id" :book="book" />
    </div>
  </div>
</template>
